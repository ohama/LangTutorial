# Milestone v1.0: FunLang MVP

**Status:** SHIPPED 2026-01-31
**Phases:** 1-5, 7 (Phase 6 on hold)
**Total Plans:** 12

## Overview

F# 언어 구현 튜토리얼 로드맵. fslex/fsyacc를 사용하여 점진적으로 기능을 추가하며 완전한 인터프리터를 구축합니다. 각 단계는 독립적으로 실행 가능한 코드를 생성합니다.

## Phases

### Phase 1: Foundation & Pipeline

**Goal**: 개발자가 fslex/fsyacc 기반 프로젝트를 설정하고 기본 파이프라인을 이해한다
**Depends on**: None (foundation phase)
**Plans**: 3 plans

Plans:
- [x] 01-01-PLAN.md — Project setup + AST types
- [x] 01-02-PLAN.md — Parser.fsy + Lexer.fsl + build configuration
- [x] 01-03-PLAN.md — Program.fs wiring + pipeline verification

**Requirements:**
- FOUND-01: .NET 10 + FsLexYacc 프로젝트 구성 설명
- FOUND-02: fslex로 토큰 생성 (Lexer 기초)
- FOUND-03: fsyacc로 AST 생성 (Parser 기초)
- FOUND-04: Discriminated Union으로 AST 타입 정의

---

### Phase 2: Arithmetic Expressions

**Goal**: 사용자가 사칙연산 계산기를 실행하여 즉각적인 결과를 얻는다
**Depends on**: Phase 1
**Plans**: 2 plans

Plans:
- [x] 02-01-PLAN.md — AST expansion + Evaluator
- [x] 02-02-PLAN.md — Parser grammar + Lexer tokens + Pipeline wiring

**Requirements:**
- EXPR-01: 사칙연산 (+, -, *, /) 구현
- EXPR-02: 연산자 우선순위 처리
- EXPR-03: 괄호로 우선순위 변경
- EXPR-04: 단항 마이너스 (음수) 지원

---

### Phase 3: Variables & Binding

**Goal**: 사용자가 변수에 값을 바인딩하고 재사용할 수 있다
**Depends on**: Phase 2
**Plans**: 2 plans

Plans:
- [x] 03-01-PLAN.md — AST + Lexer + Parser + Evaluator + Format + Program
- [x] 03-02-PLAN.md — fslit tests for variables

**Requirements:**
- VAR-01: let 바인딩 (let x = 5)
- VAR-02: 식에서 변수 참조
- VAR-03: let-in 식으로 지역 스코프

---

### Phase 4: Control Flow

**Goal**: 사용자가 조건 분기로 논리를 표현할 수 있다
**Depends on**: Phase 3
**Plans**: 1 plan

Plans:
- [x] 04-01-PLAN.md — Value type + AST + Lexer + Parser + Evaluator + Format + Program

**Requirements:**
- CTRL-01: if-then-else 조건 분기
- CTRL-02: Boolean 타입 (true, false 리터럴)
- CTRL-03: 비교 연산자 (=, <, >, <=, >=, <>)
- CTRL-04: 논리 연산자 (&&, ||)

---

### Phase 5: Functions & Abstraction

**Goal**: 사용자가 함수를 정의하고 호출하여 코드를 재사용할 수 있다
**Depends on**: Phase 4
**Plans**: 2 plans

Plans:
- [x] 05-01-PLAN.md — AST + Lexer + Parser + Format (function syntax)
- [x] 05-02-PLAN.md — Evaluator + fslit tests (function semantics)

**Requirements:**
- FUNC-01: 함수 정의 (let f x = x + 1)
- FUNC-02: 함수 호출 (f 5)
- FUNC-03: 재귀 함수 지원
- FUNC-04: 클로저 (외부 변수 캡처)

---

### Phase 6: Quality & Polish (ON HOLD)

**Goal**: 사용자가 친화적인 오류 메시지와 대화형 REPL을 경험한다
**Depends on**: Phase 5
**Plans**: 0 plans (on hold)

**Requirements (deferred):**
- QUAL-01: 사용자 친화적 에러 메시지
- QUAL-02: 대화형 REPL 셸
- QUAL-03: Expecto, FsCheck, fslit으로 테스트

---

### Phase 7: CLI Options & File-Based Tests

**Goal**: 사용자가 다양한 입력 방식과 emit 옵션으로 언어의 각 단계를 검증한다
**Depends on**: Phase 2 (parallel track)
**Plans**: 2 plans

Plans:
- [x] 07-01-PLAN.md — Token formatter + CLI expansion
- [x] 07-02-PLAN.md — fslit test suite

**Requirements:**
- CLI-01: 입력 방식 — --expr 또는 파일명
- CLI-02: --emit-tokens — 토큰 목록 출력
- CLI-03: --emit-ast — AST 출력
- CLI-04: --emit-type — (예약) 타입 체킹 출력
- CLI-05: emit 옵션을 활용한 파일 기반 테스트

---

## Milestone Summary

**Key Decisions:**
- Target .NET 10 for latest F# language features
- Use FsLexYacc 11.3.0 for lexer/parser generation
- Expr/Term/Factor grammar pattern for precedence
- Environment as Map<string, Value> for variable storage
- Value type (IntValue | BoolValue | FunctionValue) for evaluation
- Closure semantics for first-class functions
- Phase 7 parallel track for CLI/testing infrastructure

**Issues Resolved:**
- Build order: Parser.fsy before Lexer.fsl
- Function application vs subtraction ambiguity (Atom non-terminal)
- Short-circuit evaluation for logical operators

**Technical Debt (Phase 6 deferred):**
- User-friendly error messages with position info
- Interactive REPL shell
- Division by zero handling

---
*Archived: 2026-01-31 as part of v1.0 milestone completion*

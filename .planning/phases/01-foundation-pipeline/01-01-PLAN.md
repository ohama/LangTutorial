---
phase: 01-foundation-pipeline
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - FunLang/FunLang.fsproj
  - FunLang/Ast.fs
autonomous: true

must_haves:
  truths:
    - "dotnet build succeeds with FsLexYacc package installed"
    - "Ast.fs compiles with discriminated union Expr type"
  artifacts:
    - path: "FunLang/FunLang.fsproj"
      provides: ".NET 10 F# console project with FsLexYacc 11.3.0"
      contains: "FsLexYacc"
    - path: "FunLang/Ast.fs"
      provides: "AST type definitions"
      contains: "type Expr"
  key_links:
    - from: "FunLang/FunLang.fsproj"
      to: "FsLexYacc package"
      via: "PackageReference"
      pattern: 'PackageReference Include="FsLexYacc"'
---

<objective>
Create .NET 10 F# project with FsLexYacc and define AST types.

Purpose: Establish the project foundation that all subsequent plans build upon. The AST types must exist before Parser.fsy can reference them.
Output: Working FunLang project directory with Ast.fs containing expression types.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation-pipeline/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create .NET 10 F# project with FsLexYacc</name>
  <files>FunLang/FunLang.fsproj</files>
  <action>
Create a new .NET 10 F# console project named FunLang in the repository root:

```bash
dotnet new console -lang F# -f net10.0 -o FunLang
cd FunLang
dotnet add package FsLexYacc --version 11.3.0
```

After running these commands, verify the .fsproj contains:
- TargetFramework: net10.0
- PackageReference to FsLexYacc 11.3.0

Note: The default Program.fs will be replaced in Plan 03. Leave it for now to ensure the project builds.
  </action>
  <verify>
Run `dotnet build FunLang` - should succeed with no errors.
Run `dotnet list FunLang package` - should show FsLexYacc 11.3.0.
  </verify>
  <done>FunLang.fsproj exists with net10.0 target and FsLexYacc 11.3.0 package reference.</done>
</task>

<task type="auto">
  <name>Task 2: Define AST types with Discriminated Unions</name>
  <files>FunLang/Ast.fs</files>
  <action>
Create `FunLang/Ast.fs` with a minimal expression AST for the foundation phase. This AST will be extended in Phase 2 (arithmetic) and beyond.

```fsharp
module Ast

/// Expression AST - minimal foundation for lexer/parser pipeline
/// Phase 1: Number only (proof of pipeline)
/// Phase 2 will add: Add, Subtract, Multiply, Divide
type Expr =
    | Number of int
```

Update `FunLang.fsproj` to compile Ast.fs FIRST (before Program.fs):
- Add `<Compile Include="Ast.fs" />` as the first item in the ItemGroup
- The order matters in F# - Ast must come before any file that uses it

The .fsproj ItemGroup should look like:
```xml
<ItemGroup>
  <Compile Include="Ast.fs" />
  <Compile Include="Program.fs" />
</ItemGroup>
```
  </action>
  <verify>
Run `dotnet build FunLang` - should succeed.
Check that Ast.fs exists and contains `type Expr`.
  </verify>
  <done>Ast.fs defines Expr discriminated union with Number case. Compiles successfully.</done>
</task>

</tasks>

<verification>
1. `dotnet build FunLang` succeeds
2. `FunLang/Ast.fs` exists with `type Expr = | Number of int`
3. `dotnet list FunLang package` shows FsLexYacc 11.3.0
</verification>

<success_criteria>
- .NET 10 F# project created and builds
- FsLexYacc 11.3.0 package installed
- Ast.fs compiles with Expr type
- F# compilation order correct (Ast.fs before Program.fs)
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-pipeline/01-01-SUMMARY.md`
</output>
